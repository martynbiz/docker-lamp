version: "3"
services:
    # php-apache:
    #     image: php:7.2.1-apache
    #     ports:
    #         - 8080:80
    #     volumes:
    #         - ./public_html:/var/www/html
    #     links:
    #         - "mariadb"

    web:
        build: ./docker/php-apache
        # image: moodle:php:7.2.1-apache
        # volumes:
        #   - ./public_html:/var/www/html
        ports:
          - "8080:80"
        links:
            - "mariadb"

    mariadb:
        image: mariadb:10.2.33
        volumes:
            - mariadb:/var/lib/mysql
        environment:
            TZ: "Europe/Rome"
            MYSQL_ALLOW_EMPTY_PASSWORD: "no"
            MYSQL_ROOT_PASSWORD: "rootpwd"
            MYSQL_USER: "moodle"
            MYSQL_PASSWORD: "moodle"
            MYSQL_DATABASE: "moodle"

volumes:
    mariadb: